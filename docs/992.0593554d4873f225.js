"use strict";(self.webpackChunksimple_crud=self.webpackChunksimple_crud||[]).push([[992],{5992:(w,b,r)=>{r.r(b),r.d(b,{BlogModule:()=>P});var u=r(6895),c=r(8869),x=r(4128),h=r(4004),t=r(4650),g=r(8505),y=r(529);let f=(()=>{class e{constructor(o){this.http=o}createBlog(o){return this.http.post("https://json-server-seven-mock.herokuapp.com/blogs",o).pipe((0,g.b)(n=>n))}getBlogs(){return this.http.get("https://json-server-seven-mock.herokuapp.com/blogs").pipe((0,g.b)(o=>o))}updateBlog(o){return this.http.get("https://json-server-seven-mock.herokuapp.com/blogs").pipe((0,h.U)(n=>n.filter(s=>s.id===o)))}editBlog(o){return this.http.put(`https://json-server-seven-mock.herokuapp.com/blogs/${o.id}`,o).pipe((0,g.b)(n=>n))}deleteOne(o){return this.http.delete(`https://json-server-seven-mock.herokuapp.com/blogs/${o}`).pipe((0,g.b)(n=>n))}deleteAll(){this.http.delete("https://json-server-seven-mock.herokuapp.com/blogs/").pipe((0,g.b)(o=>o))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(y.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=r(9835),l=r(3546),d=r(4859);const T=function(e){return["form",e]};let _=(()=>{class e{constructor(){this.actionEmitter=new t.vpe}ngOnInit(){}deleteBlog(o){this.actionEmitter.emit(o)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-blog-item"]],inputs:{blog:"blog"},outputs:{actionEmitter:"actionEmitter"},decls:24,vars:7,consts:[[1,"example-card"],["mat-card-avatar","",1,"example-header-image"],["mat-button","",3,"routerLink"],["mat-button","",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div")(1,"mat-card",0)(2,"mat-card-header"),t._UZ(3,"div",1),t.TgZ(4,"mat-card-title"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"p"),t._uU(10),t.qZA()(),t.TgZ(11,"mat-card-actions")(12,"button",2),t._uU(13,"Edit"),t.qZA(),t.TgZ(14,"button",3),t.NdJ("click",function(){return n.deleteBlog(null==n.blog?null:n.blog.id)}),t._uU(15,"Delete"),t.qZA()(),t.TgZ(16,"mat-card-title-group")(17,"mat-card-subtitle"),t._uU(18," COMMENTS"),t._UZ(19,"br")(20,"br"),t.TgZ(21,"p"),t._uU(22),t.qZA()()()(),t._UZ(23,"br"),t.qZA()),2&o&&(t.xp6(5),t.Oqu(null==n.blog?null:n.blog.title),t.xp6(2),t.hij("By: ",null==n.blog?null:n.blog.author,""),t.xp6(3),t.hij(" ",null==n.blog?null:n.blog.description," "),t.xp6(2),t.Q6J("routerLink",t.VKq(5,T,null==n.blog?null:n.blog.id)),t.xp6(10),t.Oqu(null==n.blog?null:n.blog.comments))},dependencies:[c.rH,l.a8,l.dk,l.C1,l.dn,l.n5,l.$j,l.hq,l.kc,d.lW],styles:[".example-header-image[_ngcontent-%COMP%]{background-image:url(https://static.wixstatic.com/media/9e18ff_880a072ecbbd43efbe03328cf06a5608~mv2.jpg/v1/crop/x_668,y_9,w_3856,h_3626/fill/w_701,h_660,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/me-2.jpg);background-size:cover}"]}),e})();function F(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div",1)(1,"app-blog-item",2),t.NdJ("actionEmitter",function(s){t.CHM(o);const p=t.oxw();return t.KtG(p.deleteBlog(s))}),t.qZA()()}if(2&e){const o=i.$implicit;t.xp6(1),t.Q6J("blog",o)}}let U=(()=>{class e{constructor(o){this.blogService=o,this.blogs=[]}ngOnInit(){this.blogService.getBlogs().subscribe(o=>{this.blogs=o})}deleteBlog(o){this.updatedBlog=(0,x.D)([this.blogService.deleteOne(o),this.blogService.getBlogs()]).pipe((0,h.U)(([n,s])=>{this.blogs=s})).subscribe(),this.router.navigate(["/blog"])}ngOnDestroy(){this.updatedBlog?.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-blog-list"]],decls:5,vars:1,consts:[["class","example-card",4,"ngFor","ngForOf"],[1,"example-card"],[1,"app-blog",3,"blog","actionEmitter"]],template:function(o,n){1&o&&(t._UZ(0,"app-command-bar"),t.TgZ(1,"h1"),t._uU(2,"Blogs"),t.qZA(),t.TgZ(3,"section"),t.YNc(4,F,2,1,"div",0),t.qZA()),2&o&&(t.xp6(4),t.Q6J("ngForOf",n.blogs))},dependencies:[A.H,u.sg,_],styles:[".example-card[_ngcontent-%COMP%]{width:500px;height:1000px;margin:50px}section[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin:20px;justify-content:center}section[_ngcontent-%COMP%]   .app-blog[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-evenly}h1[_ngcontent-%COMP%]{text-align:center;margin:20px 10px 10px}"]}),e})();var m=r(4006),v=r(7392),B=r(7676),Z=r(4144);function O(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",2)(2,"mat-label"),t._uU(3,"Add your comment"),t.qZA(),t._UZ(4,"input",12),t.TgZ(5,"button",13),t.NdJ("click",function(){const p=t.CHM(o).index,a=t.oxw();return t.KtG(a.deleteComment(p))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()()()}if(2&e){const o=i.index;t.xp6(4),t.Q6J("formControlName",o)}}const M=function(){return["/blog"]};let C=(()=>{class e{constructor(o,n,s,p){this.fb=o,this.routes=n,this.blogService=s,this.router=p,this.blogData=[],this.routes.paramMap.subscribe(a=>{this.blogId=a.get("id")}),this.blogForm=this.fb.group({id:[],title:[""],description:[""],author:[""],comments:this.fb.array([])}),this.commentsArray=this.blogForm.get("comments"),this.updatedBlog=this.blogService.updateBlog(parseInt(this.blogId)).subscribe(a=>{this.blogForm=this.fb.group({id:[a[0].id],title:[a[0].title],description:[a[0].description],author:[a[0].author],comments:this.fb.array([])}),this.commentsArray=this.blogForm.get("comments");for(let j of a[0].comments)this.commentsArray.push(new m.NI(j))})}ngOnInit(){}deleteComment(o){this.commentsArray.removeAt(o)}addComment(){this.commentsArray.push(new m.NI(""))}submit(){console.log(this.blogForm?.value);let o=this.blogForm.getRawValue();this.blogId&&null!==o.id?this.blogService.editBlog(o).subscribe(()=>{alert("Blog has been added updated"),this.router.navigate(["/blog"])}):this.blogService.createBlog(o).subscribe(()=>{alert("New blog has been added"),this.router.navigate(["/blog"])})}ngOnDestroy(){this.updatedBlog.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m.qu),t.Y36(c.gz),t.Y36(f),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-blog-form"]],decls:33,vars:4,consts:[["id","blog-form"],[1,"example-form",3,"formGroup","ngSubmit"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","title","id","title"],["matInput","","formControlName","description","id","description","rows","7"],["matInput","","formControlName","author","id","author"],["formArrayName","comments"],[4,"ngFor","ngForOf"],["type","button","mat-stroked-button","","color","warn","id","add-comment",3,"click"],["id","submit-btn"],["mat-raised-button","","type","submit","color","warn",1,"submitBtn"],["mat-raised-button","","color","primary",3,"routerLink"],["matInput","",3,"formControlName"],["mat-mini-fab","","id","comment-delete","color","warn",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t._uU(4," Blog Form "),t.qZA()(),t.TgZ(5,"mat-card-content")(6,"form",1),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Title"),t.qZA(),t._UZ(10,"input",3),t.qZA(),t._UZ(11,"br"),t.TgZ(12,"mat-form-field",2)(13,"mat-label"),t._uU(14,"Description"),t.qZA(),t._UZ(15,"textarea",4),t.qZA(),t._UZ(16,"br"),t.TgZ(17,"mat-form-field",2)(18,"mat-label"),t._uU(19,"Author"),t.qZA(),t._UZ(20,"input",5),t.qZA(),t._UZ(21,"br"),t.ynx(22,6),t.YNc(23,O,8,1,"div",7),t.TgZ(24,"button",8),t.NdJ("click",function(){return n.addComment()}),t._uU(25,"Add Comment"),t.qZA(),t._UZ(26,"br")(27,"br"),t.BQk(),t.TgZ(28,"div",9)(29,"button",10),t._uU(30,"Submit"),t.qZA(),t.TgZ(31,"button",11),t._uU(32,"Back"),t.qZA()()()()()()),2&o&&(t.xp6(6),t.Q6J("formGroup",n.blogForm),t.xp6(17),t.Q6J("ngForOf",n.commentsArray.controls),t.xp6(8),t.Q6J("routerLink",t.DdM(3,M)))},dependencies:[u.sg,c.rH,l.a8,l.dk,l.dn,l.n5,d.lW,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,m.CE,v.Hw,B.KE,B.hX,Z.Nt],styles:["#blog-form[_ngcontent-%COMP%]{text-align:center;height:400px;width:500px!important;margin:50px auto 70px;font-size:15px;padding:20px}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}mat-label[_ngcontent-%COMP%]{color:#fff}mat-card[_ngcontent-%COMP%]{background-color:#194553;border-radius:20px}mat-form-field[_ngcontent-%COMP%]{border-color:#fff}.submitBtn[_ngcontent-%COMP%]{margin-right:10px}#comment-delete[_ngcontent-%COMP%]{margin-left:400px}#submit-btn[_ngcontent-%COMP%]{margin-left:310px}#add-comment[_ngcontent-%COMP%]{margin-right:400px}"]}),e})();const k=[{path:"",component:U},{path:"form",component:C},{path:"form/:id",component:C}];let N=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(k),u.ez,c.Bz]}),e})();var I=r(4850),J=r(782),S=r(3472);let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[S.m,u.ez,N,l.QW,I.t,J.N6,d.ot,m.UX,v.Ps,Z.c]}),e})()}}]);